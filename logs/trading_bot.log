2025-07-25 15:51:34,290 - config.settings - INFO - Logging configured - Level: INFO, File: logs/trading_bot.log
2025-07-25 15:51:34,291 - config.settings - INFO - Settings loaded - Environment: development, Debug: True
2025-07-25 15:51:34,531 - api.web_api - INFO - BingX client initialized successfully
2025-07-25 15:51:34,556 - api.web_api - INFO - FastAPI server starting - health check will be available immediately
2025-07-25 15:51:34,557 - api.web_api - INFO - FastAPI startup completed - health check ready
2025-07-25 15:51:34,557 - api.web_api - INFO - Database initialization starting with 0.26s delay...
2025-07-25 15:51:34,821 - api.web_api - INFO - Initializing database with 30s timeout...
2025-07-25 15:51:34,821 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:51:34,821 - database.connection - INFO - Using SQLite database
2025-07-25 15:51:34,879 - database.connection - INFO - Database connection established successfully
2025-07-25 15:51:34,879 - api.web_api - INFO - Creating database tables (skipping drop for faster startup)...
2025-07-25 15:51:34,881 - database.connection - INFO - Database tables created successfully
2025-07-25 15:51:34,881 - api.web_api - INFO - Database initialization completed successfully
2025-07-25 15:51:35,557 - api.web_api - INFO - Background tasks started: real-time data broadcasting, automated risk management, scanner status broadcasting, and WebSocket heartbeat
2025-07-25 15:51:35,558 - api.web_api - INFO - Starting automated risk management task
2025-07-25 15:51:35,558 - api.web_api - INFO - Starting scanner status broadcast task
2025-07-25 15:51:35,558 - api.web_api - INFO - Starting WebSocket heartbeat task
2025-07-25 15:51:39,138 - api.web_api - INFO - FastAPI server shutting down
2025-07-25 15:51:39,138 - api.web_api - INFO - Scanner status broadcast task cancelled
2025-07-25 15:51:39,139 - api.web_api - INFO - WebSocket heartbeat task cancelled
2025-07-25 15:51:40,233 - config.settings - INFO - Logging configured - Level: INFO, File: logs/trading_bot.log
2025-07-25 15:51:40,233 - config.settings - INFO - Settings loaded - Environment: development, Debug: True
2025-07-25 15:51:40,508 - api.web_api - INFO - BingX client initialized successfully
2025-07-25 15:51:40,532 - api.web_api - INFO - FastAPI server starting - health check will be available immediately
2025-07-25 15:51:40,532 - api.web_api - INFO - FastAPI startup completed - health check ready
2025-07-25 15:51:40,532 - api.web_api - INFO - Database initialization starting with 0.10s delay...
2025-07-25 15:51:40,635 - api.web_api - INFO - Initializing database with 30s timeout...
2025-07-25 15:51:40,635 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:51:40,636 - database.connection - INFO - Using SQLite database
2025-07-25 15:51:40,651 - database.connection - INFO - Database connection established successfully
2025-07-25 15:51:40,652 - api.web_api - INFO - Creating database tables (skipping drop for faster startup)...
2025-07-25 15:51:40,655 - database.connection - INFO - Database tables created successfully
2025-07-25 15:51:40,655 - api.web_api - INFO - Database initialization completed successfully
2025-07-25 15:51:40,737 - api.web_api - INFO - WebSocket connection attempt from 127.0.0.1
2025-07-25 15:51:40,737 - api.web_api - INFO - WebSocket connected: conn_1_1753469500 from 127.0.0.1. Total: 1
2025-07-25 15:51:40,739 - api.web_api - INFO - WebSocket connected: conn_1_1753469500 from 127.0.0.1
2025-07-25 15:51:41,533 - api.web_api - INFO - Background tasks started: real-time data broadcasting, automated risk management, scanner status broadcasting, and WebSocket heartbeat
2025-07-25 15:51:41,555 - api.web_api - INFO - Starting automated risk management task
2025-07-25 15:51:41,555 - api.web_api - INFO - Starting scanner status broadcast task
2025-07-25 15:51:41,555 - api.web_api - INFO - Starting WebSocket heartbeat task
2025-07-25 15:51:42,459 - api.web_api - INFO - Subscription confirmed for conn_1_1753469500: trading_data
2025-07-25 15:51:42,460 - api.web_api - INFO - Subscription confirmed for conn_1_1753469500: scanner_status
2025-07-25 15:51:42,460 - api.web_api - INFO - Subscription confirmed for conn_1_1753469500: general
2025-07-25 15:51:45,514 - api.web_api - ERROR - Error receiving message from conn_1_1753469500: (1012, None)
2025-07-25 15:51:45,514 - api.web_api - INFO - WebSocket disconnected: conn_1_1753469500 | Host: 127.0.0.1 | Reason: final_cleanup* | Duration: 4.8s | Messages: 4 | Failures: 0 | Bytes sent: 1712 | Remaining: 0
2025-07-25 15:51:45,614 - api.web_api - INFO - FastAPI server shutting down
2025-07-25 15:51:45,615 - api.web_api - INFO - Scanner status broadcast task cancelled
2025-07-25 15:51:45,615 - api.web_api - INFO - WebSocket heartbeat task cancelled
2025-07-25 15:51:46,591 - config.settings - INFO - Logging configured - Level: INFO, File: logs/trading_bot.log
2025-07-25 15:51:46,591 - config.settings - INFO - Settings loaded - Environment: development, Debug: True
2025-07-25 15:51:46,898 - api.web_api - INFO - BingX client initialized successfully
2025-07-25 15:51:46,923 - api.web_api - INFO - FastAPI server starting - health check will be available immediately
2025-07-25 15:51:46,924 - api.web_api - INFO - FastAPI startup completed - health check ready
2025-07-25 15:51:46,924 - api.web_api - INFO - Database initialization starting with 0.33s delay...
2025-07-25 15:51:46,925 - api.web_api - INFO - WebSocket connection attempt from 127.0.0.1
2025-07-25 15:51:46,925 - api.web_api - INFO - WebSocket connected: conn_1_1753469506 from 127.0.0.1. Total: 1
2025-07-25 15:51:46,926 - api.web_api - INFO - WebSocket connected: conn_1_1753469506 from 127.0.0.1
2025-07-25 15:51:47,228 - api.web_api - ERROR - Error sending trading snapshot: Database not initialized - call init_database() first
2025-07-25 15:51:47,229 - api.web_api - INFO - Subscription confirmed for conn_1_1753469506: trading_data
2025-07-25 15:51:47,229 - api.web_api - INFO - Subscription confirmed for conn_1_1753469506: scanner_status
2025-07-25 15:51:47,229 - api.web_api - INFO - Subscription confirmed for conn_1_1753469506: general
2025-07-25 15:51:47,251 - api.web_api - INFO - Initializing database with 30s timeout...
2025-07-25 15:51:47,251 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:51:47,251 - database.connection - INFO - Using SQLite database
2025-07-25 15:51:47,325 - database.connection - INFO - Database connection established successfully
2025-07-25 15:51:47,326 - api.web_api - INFO - Creating database tables (skipping drop for faster startup)...
2025-07-25 15:51:47,327 - database.connection - INFO - Database tables created successfully
2025-07-25 15:51:47,327 - api.web_api - INFO - Database initialization completed successfully
2025-07-25 15:51:47,925 - api.web_api - INFO - Background tasks started: real-time data broadcasting, automated risk management, scanner status broadcasting, and WebSocket heartbeat
2025-07-25 15:51:47,948 - api.web_api - INFO - Starting automated risk management task
2025-07-25 15:51:47,949 - api.web_api - INFO - Starting scanner status broadcast task
2025-07-25 15:51:47,949 - api.web_api - INFO - Starting WebSocket heartbeat task
2025-07-25 15:51:48,177 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:51:48,178 - database.connection - INFO - Using SQLite database
2025-07-25 15:51:48,179 - database.connection - INFO - Database connection established successfully
2025-07-25 15:51:48,214 - api.web_api - INFO - Asset validation table requested - page: 1, per_page: 25, sort: symbol asc
2025-07-25 15:51:48,317 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:51:48,317 - database.connection - INFO - Using SQLite database
2025-07-25 15:51:48,319 - database.connection - INFO - Database connection established successfully
2025-07-25 15:51:48,323 - api.web_api - INFO - Fetched 1 assets (total: 1, page: 1/1)
2025-07-25 15:51:48,710 - api.web_api - INFO - Trading live data requested - symbols: None, limit: 50
2025-07-25 15:51:48,710 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:51:48,710 - database.connection - INFO - Using SQLite database
2025-07-25 15:51:48,711 - database.connection - INFO - Database connection established successfully
2025-07-25 15:51:55,171 - api.client - INFO - BingX API connection test successful - found 2250 markets
2025-07-25 15:51:55,174 - api.client - INFO - BingX client initialized successfully (Testnet: True)
2025-07-25 15:51:55,175 - database.connection - ERROR - Unexpected error in database session: AssetRepository.get_valid_assets() got an unexpected keyword argument 'limit'
2025-07-25 15:51:55,175 - api.web_api - WARNING - No valid symbols in database: AssetRepository.get_valid_assets() got an unexpected keyword argument 'limit'
2025-07-25 15:51:55,175 - api.web_api - ERROR - Error fetching trading live data: 424: {'error': 'no_valid_symbols', 'message': 'Nenhum ativo válido encontrado no banco de dados. Execute o scan inicial primeiro.', 'action_required': 'initial_scan', 'suggestion': "Clique em 'Executar Scan Inicial' na aba Scanner para descobrir ativos válidos."}
2025-07-25 15:51:55,176 - database.connection - ERROR - Unexpected error in database session: 500: Trading data error: 424: {'error': 'no_valid_symbols', 'message': 'Nenhum ativo válido encontrado no banco de dados. Execute o scan inicial primeiro.', 'action_required': 'initial_scan', 'suggestion': "Clique em 'Executar Scan Inicial' na aba Scanner para descobrir ativos válidos."}
2025-07-25 15:51:55,283 - api.web_api - INFO - Trading trades requested - symbol: None, status: None, limit: 20
2025-07-25 15:51:58,401 - api.web_api - INFO - Asset validation table requested - page: 1, per_page: 25, sort: symbol asc
2025-07-25 15:51:58,401 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:51:58,401 - database.connection - INFO - Using SQLite database
2025-07-25 15:51:58,402 - database.connection - INFO - Database connection established successfully
2025-07-25 15:51:58,405 - api.web_api - INFO - Fetched 1 assets (total: 1, page: 1/1)
2025-07-25 15:51:58,475 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:51:58,475 - database.connection - INFO - Using SQLite database
2025-07-25 15:51:58,476 - database.connection - INFO - Database connection established successfully
2025-07-25 15:51:58,880 - api.web_api - INFO - 🚀 Starting complete initial asset scan from frontend request...
2025-07-25 15:51:58,881 - scanner.initial_scanner - INFO - Scanner started: Iniciando descoberta e população de ativos... (0 assets)
2025-07-25 15:51:58,881 - scanner.initial_scanner - INFO - Progress: 0/0 (20.0%) - Descobrindo mercados disponíveis...
2025-07-25 15:52:05,301 - api.client - INFO - Fetched 1502 USDT markets
2025-07-25 15:52:05,302 - performance.performance - INFO - Operation timing: fetch_markets
2025-07-25 15:52:05,306 - api.market_data - INFO - Fetched 1502 USDT markets
2025-07-25 15:52:05,306 - scanner.initial_scanner - INFO - Discovered 1502 markets from exchange
2025-07-25 15:52:05,307 - scanner.initial_scanner - INFO - Progress: 0/0 (40.0%) - Filtrando e priorizando pares USDT...
2025-07-25 15:52:05,307 - scanner.initial_scanner - INFO - Extracting all active USDT pairs...
2025-07-25 15:52:05,307 - scanner.initial_scanner - INFO - Found 1502 active USDT pairs (0 invalid markets skipped)
2025-07-25 15:52:05,307 - scanner.initial_scanner - INFO - Processing ALL 1502 discovered assets
2025-07-25 15:52:05,312 - api.web_api - INFO - WebSocket disconnected: conn_1_1753469506 | Host: 127.0.0.1 | Reason: broadcast_failure | Duration: 18.4s | Messages: 4 | Failures: 0 | Bytes sent: 3414 | Remaining: 0
2025-07-25 15:52:05,312 - api.web_api - WARNING - Broadcast 'trading_data' failed to reach any connections
2025-07-25 15:52:05,312 - api.web_api - INFO - Removed 1 failed connections during broadcast
2025-07-25 15:52:05,313 - api.web_api - ERROR - Error receiving message from conn_1_1753469506: (1012, None)
2025-07-25 15:52:05,313 - api.web_api - WARNING - Broadcast 'general' failed to reach any connections
2025-07-25 15:52:05,313 - api.web_api - INFO - Removed 1 failed connections during broadcast
2025-07-25 15:52:05,313 - scanner.initial_scanner - INFO - Progress: 0/0 (60.0%) - Salvando 1502 ativos no banco de dados...
2025-07-25 15:52:05,314 - scanner.initial_scanner - ERROR - Database transaction failed, rolled back: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:52:05,314 - database.connection - ERROR - Unexpected error in database session: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:52:05,315 - scanner.initial_scanner - ERROR - Database batch operation failed: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:52:05,315 - scanner.initial_scanner - ERROR - Critical error saving basic assets: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:52:05,315 - scanner.initial_scanner - ERROR - Critical error during initial scan: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:52:05,315 - scanner.initial_scanner - WARNING - Error during resource cleanup: 'InitialScanner' object has no attribute 'validation_strategy'
2025-07-25 15:52:05,315 - api.web_api - ERROR - ❌ Error in initial scan: 'InitialScanner' object has no attribute 'validation_strategy'
2025-07-25 15:52:05,410 - api.web_api - INFO - FastAPI server shutting down
2025-07-25 15:52:05,411 - api.web_api - INFO - Scanner status broadcast task cancelled
2025-07-25 15:52:05,411 - api.web_api - INFO - WebSocket heartbeat task cancelled
2025-07-25 15:52:06,354 - config.settings - INFO - Logging configured - Level: INFO, File: logs/trading_bot.log
2025-07-25 15:52:06,354 - config.settings - INFO - Settings loaded - Environment: development, Debug: True
2025-07-25 15:52:06,598 - api.web_api - INFO - BingX client initialized successfully
2025-07-25 15:52:06,627 - api.web_api - INFO - FastAPI server starting - health check will be available immediately
2025-07-25 15:52:06,627 - api.web_api - INFO - FastAPI startup completed - health check ready
2025-07-25 15:52:06,627 - api.web_api - INFO - Database initialization starting with 0.17s delay...
2025-07-25 15:52:06,801 - api.web_api - INFO - Initializing database with 30s timeout...
2025-07-25 15:52:06,801 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:52:06,801 - database.connection - INFO - Using SQLite database
2025-07-25 15:52:06,864 - database.connection - INFO - Database connection established successfully
2025-07-25 15:52:06,864 - api.web_api - INFO - Creating database tables (skipping drop for faster startup)...
2025-07-25 15:52:06,866 - database.connection - INFO - Database tables created successfully
2025-07-25 15:52:06,866 - api.web_api - INFO - Database initialization completed successfully
2025-07-25 15:52:45,872 - config.settings - INFO - Logging configured - Level: INFO, File: logs/trading_bot.log
2025-07-25 15:52:45,872 - config.settings - INFO - Settings loaded - Environment: development, Debug: True
2025-07-25 15:52:46,097 - api.web_api - INFO - BingX client initialized successfully
2025-07-25 15:52:46,117 - api.web_api - INFO - FastAPI server starting - health check will be available immediately
2025-07-25 15:52:46,117 - api.web_api - INFO - FastAPI startup completed - health check ready
2025-07-25 15:52:46,118 - api.web_api - INFO - Database initialization starting with 0.47s delay...
2025-07-25 15:52:46,361 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:52:46,361 - database.connection - INFO - Using SQLite database
2025-07-25 15:52:46,370 - database.connection - INFO - Database connection established successfully
2025-07-25 15:52:46,373 - database.connection - INFO - Database tables created successfully
2025-07-25 15:52:46,458 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:52:46,459 - database.connection - INFO - Using SQLite database
2025-07-25 15:52:46,460 - database.connection - INFO - Database connection established successfully
2025-07-25 15:52:46,574 - api.web_api - INFO - WebSocket connection attempt from 127.0.0.1
2025-07-25 15:52:46,574 - api.web_api - INFO - WebSocket connected: conn_1_1753469566 from 127.0.0.1. Total: 1
2025-07-25 15:52:46,575 - api.web_api - INFO - WebSocket connected: conn_1_1753469566 from 127.0.0.1
2025-07-25 15:52:46,590 - api.web_api - INFO - Initializing database with 30s timeout...
2025-07-25 15:52:46,590 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:52:46,590 - database.connection - INFO - Using SQLite database
2025-07-25 15:52:46,592 - database.connection - INFO - Database connection established successfully
2025-07-25 15:52:46,592 - api.web_api - INFO - Creating database tables (skipping drop for faster startup)...
2025-07-25 15:52:46,594 - database.connection - INFO - Database tables created successfully
2025-07-25 15:52:46,594 - api.web_api - INFO - Database initialization completed successfully
2025-07-25 15:52:46,688 - api.web_api - INFO - Subscription confirmed for conn_1_1753469566: trading_data
2025-07-25 15:52:46,689 - api.web_api - INFO - Subscription confirmed for conn_1_1753469566: scanner_status
2025-07-25 15:52:46,689 - api.web_api - INFO - Subscription confirmed for conn_1_1753469566: general
2025-07-25 15:52:46,969 - api.web_api - ERROR - Error receiving message from conn_1_1753469566: (1000, None)
2025-07-25 15:52:46,970 - api.web_api - INFO - WebSocket disconnected: conn_1_1753469566 | Host: 127.0.0.1 | Reason: final_cleanup* | Duration: 0.4s | Messages: 4 | Failures: 0 | Bytes sent: 838 | Remaining: 0
2025-07-25 15:52:47,041 - api.web_api - INFO - WebSocket connection attempt from 127.0.0.1
2025-07-25 15:52:47,042 - api.web_api - INFO - WebSocket connected: conn_2_1753469567 from 127.0.0.1. Total: 1
2025-07-25 15:52:47,042 - api.web_api - INFO - WebSocket connected: conn_2_1753469567 from 127.0.0.1
2025-07-25 15:52:47,119 - api.web_api - INFO - Background tasks started: real-time data broadcasting, automated risk management, scanner status broadcasting, and WebSocket heartbeat
2025-07-25 15:52:47,122 - api.web_api - INFO - Starting automated risk management task
2025-07-25 15:52:47,122 - api.web_api - INFO - Starting scanner status broadcast task
2025-07-25 15:52:47,122 - api.web_api - INFO - Starting WebSocket heartbeat task
2025-07-25 15:52:47,157 - api.web_api - INFO - Subscription confirmed for conn_2_1753469567: trading_data
2025-07-25 15:52:47,157 - api.web_api - INFO - Subscription confirmed for conn_2_1753469567: scanner_status
2025-07-25 15:52:47,158 - api.web_api - INFO - Subscription confirmed for conn_2_1753469567: general
2025-07-25 15:52:49,739 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:52:49,739 - database.connection - INFO - Using SQLite database
2025-07-25 15:52:49,740 - database.connection - INFO - Database connection established successfully
2025-07-25 15:52:49,752 - api.web_api - INFO - Asset validation table requested - page: 1, per_page: 25, sort: symbol asc
2025-07-25 15:52:49,852 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:52:49,852 - database.connection - INFO - Using SQLite database
2025-07-25 15:52:49,853 - database.connection - INFO - Database connection established successfully
2025-07-25 15:52:49,857 - api.web_api - INFO - Fetched 1 assets (total: 1, page: 1/1)
2025-07-25 15:52:50,262 - api.web_api - INFO - Trading live data requested - symbols: None, limit: 50
2025-07-25 15:52:50,262 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:52:50,262 - database.connection - INFO - Using SQLite database
2025-07-25 15:52:50,263 - database.connection - INFO - Database connection established successfully
2025-07-25 15:52:56,684 - api.client - INFO - BingX API connection test successful - found 2250 markets
2025-07-25 15:52:56,686 - api.client - INFO - BingX client initialized successfully (Testnet: True)
2025-07-25 15:52:56,686 - database.connection - ERROR - Unexpected error in database session: AssetRepository.get_valid_assets() got an unexpected keyword argument 'limit'
2025-07-25 15:52:56,687 - api.web_api - WARNING - No valid symbols in database: AssetRepository.get_valid_assets() got an unexpected keyword argument 'limit'
2025-07-25 15:52:56,687 - api.web_api - ERROR - Error fetching trading live data: 424: {'error': 'no_valid_symbols', 'message': 'Nenhum ativo válido encontrado no banco de dados. Execute o scan inicial primeiro.', 'action_required': 'initial_scan', 'suggestion': "Clique em 'Executar Scan Inicial' na aba Scanner para descobrir ativos válidos."}
2025-07-25 15:52:56,688 - database.connection - ERROR - Unexpected error in database session: 500: Trading data error: 424: {'error': 'no_valid_symbols', 'message': 'Nenhum ativo válido encontrado no banco de dados. Execute o scan inicial primeiro.', 'action_required': 'initial_scan', 'suggestion': "Clique em 'Executar Scan Inicial' na aba Scanner para descobrir ativos válidos."}
2025-07-25 15:52:56,796 - api.web_api - INFO - Trading trades requested - symbol: None, status: None, limit: 20
2025-07-25 15:53:02,029 - api.web_api - INFO - Asset validation table requested - page: 1, per_page: 25, sort: symbol asc
2025-07-25 15:53:02,029 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:53:02,029 - database.connection - INFO - Using SQLite database
2025-07-25 15:53:02,030 - database.connection - INFO - Database connection established successfully
2025-07-25 15:53:02,033 - api.web_api - INFO - Fetched 1 assets (total: 1, page: 1/1)
2025-07-25 15:53:06,138 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:53:06,138 - database.connection - INFO - Using SQLite database
2025-07-25 15:53:06,139 - database.connection - INFO - Database connection established successfully
2025-07-25 15:53:07,236 - api.web_api - INFO - 🚀 Starting complete initial asset scan from frontend request...
2025-07-25 15:53:07,236 - scanner.initial_scanner - INFO - Scanner started: Iniciando descoberta e população de ativos... (0 assets)
2025-07-25 15:53:07,237 - scanner.initial_scanner - INFO - Progress: 0/0 (20.0%) - Descobrindo mercados disponíveis...
2025-07-25 15:53:12,777 - api.client - INFO - Fetched 1502 USDT markets
2025-07-25 15:53:12,778 - performance.performance - INFO - Operation timing: fetch_markets
2025-07-25 15:53:12,782 - api.market_data - INFO - Fetched 1502 USDT markets
2025-07-25 15:53:12,782 - scanner.initial_scanner - INFO - Discovered 1502 markets from exchange
2025-07-25 15:53:12,782 - scanner.initial_scanner - INFO - Progress: 0/0 (40.0%) - Filtrando e priorizando pares USDT...
2025-07-25 15:53:12,783 - scanner.initial_scanner - INFO - Extracting all active USDT pairs...
2025-07-25 15:53:12,783 - scanner.initial_scanner - INFO - Found 1502 active USDT pairs (0 invalid markets skipped)
2025-07-25 15:53:12,783 - scanner.initial_scanner - INFO - Processing ALL 1502 discovered assets
2025-07-25 15:53:12,784 - api.web_api - INFO - Asset validation table requested - page: 1, per_page: 25, sort: symbol asc
2025-07-25 15:53:12,784 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:53:12,784 - database.connection - INFO - Using SQLite database
2025-07-25 15:53:12,785 - database.connection - INFO - Database connection established successfully
2025-07-25 15:53:12,790 - api.web_api - INFO - Fetched 1 assets (total: 1, page: 1/1)
2025-07-25 15:53:12,792 - scanner.initial_scanner - INFO - Progress: 0/0 (60.0%) - Salvando 1502 ativos no banco de dados...
2025-07-25 15:53:12,793 - scanner.initial_scanner - ERROR - Database transaction failed, rolled back: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:53:12,793 - database.connection - ERROR - Unexpected error in database session: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:53:12,794 - scanner.initial_scanner - ERROR - Database batch operation failed: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:53:12,794 - scanner.initial_scanner - ERROR - Critical error saving basic assets: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:53:12,794 - scanner.initial_scanner - ERROR - Critical error during initial scan: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:53:12,864 - api.web_api - ERROR - ❌ Error in initial scan: 'InitialScanner' object has no attribute 'validation_strategy'
2025-07-25 15:53:12,922 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:53:12,922 - database.connection - INFO - Using SQLite database
2025-07-25 15:53:12,923 - database.connection - INFO - Database connection established successfully
2025-07-25 15:53:20,745 - api.web_api - INFO - Asset validation table requested - page: 1, per_page: 25, sort: symbol asc
2025-07-25 15:53:20,745 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:53:20,745 - database.connection - INFO - Using SQLite database
2025-07-25 15:53:20,746 - database.connection - INFO - Database connection established successfully
2025-07-25 15:53:20,750 - api.web_api - INFO - Fetched 1 assets (total: 1, page: 1/1)
2025-07-25 15:53:20,811 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:53:20,811 - database.connection - INFO - Using SQLite database
2025-07-25 15:53:20,812 - database.connection - INFO - Database connection established successfully
2025-07-25 15:53:21,075 - api.web_api - INFO - 🚀 Starting complete initial asset scan from frontend request...
2025-07-25 15:53:21,075 - scanner.initial_scanner - INFO - Scanner started: Iniciando descoberta e população de ativos... (0 assets)
2025-07-25 15:53:21,076 - scanner.initial_scanner - INFO - Progress: 0/0 (20.0%) - Descobrindo mercados disponíveis...
2025-07-25 15:53:27,507 - api.client - INFO - Fetched 1502 USDT markets
2025-07-25 15:53:27,508 - performance.performance - INFO - Operation timing: fetch_markets
2025-07-25 15:53:27,514 - api.market_data - INFO - Fetched 1502 USDT markets
2025-07-25 15:53:27,514 - scanner.initial_scanner - INFO - Discovered 1502 markets from exchange
2025-07-25 15:53:27,515 - scanner.initial_scanner - INFO - Progress: 0/0 (40.0%) - Filtrando e priorizando pares USDT...
2025-07-25 15:53:27,515 - scanner.initial_scanner - INFO - Extracting all active USDT pairs...
2025-07-25 15:53:27,515 - scanner.initial_scanner - INFO - Found 1502 active USDT pairs (0 invalid markets skipped)
2025-07-25 15:53:27,515 - scanner.initial_scanner - INFO - Processing ALL 1502 discovered assets
2025-07-25 15:53:27,516 - scanner.initial_scanner - INFO - Progress: 0/0 (60.0%) - Salvando 1502 ativos no banco de dados...
2025-07-25 15:53:27,517 - scanner.initial_scanner - ERROR - Database transaction failed, rolled back: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:53:27,517 - database.connection - ERROR - Unexpected error in database session: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:53:27,518 - scanner.initial_scanner - ERROR - Database batch operation failed: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:53:27,518 - scanner.initial_scanner - ERROR - Critical error saving basic assets: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:53:27,518 - scanner.initial_scanner - ERROR - Critical error during initial scan: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:53:27,582 - api.web_api - ERROR - ❌ Error in initial scan: 'InitialScanner' object has no attribute 'validation_strategy'
2025-07-25 15:53:32,513 - api.web_api - INFO - Asset validation table requested - page: 1, per_page: 25, sort: symbol asc
2025-07-25 15:53:32,513 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:53:32,513 - database.connection - INFO - Using SQLite database
2025-07-25 15:53:32,514 - database.connection - INFO - Database connection established successfully
2025-07-25 15:53:32,517 - api.web_api - INFO - Fetched 1 assets (total: 1, page: 1/1)
2025-07-25 15:53:36,747 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:53:36,748 - database.connection - INFO - Using SQLite database
2025-07-25 15:53:36,749 - database.connection - INFO - Database connection established successfully
2025-07-25 15:53:42,178 - api.web_api - INFO - Asset validation table requested - page: 1, per_page: 25, sort: symbol asc
2025-07-25 15:53:42,178 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:53:42,178 - database.connection - INFO - Using SQLite database
2025-07-25 15:53:42,179 - database.connection - INFO - Database connection established successfully
2025-07-25 15:53:42,182 - api.web_api - INFO - Fetched 1 assets (total: 1, page: 1/1)
2025-07-25 15:53:43,740 - api.web_api - ERROR - Error receiving message from conn_2_1753469567: (1012, None)
2025-07-25 15:53:43,740 - api.web_api - INFO - WebSocket disconnected: conn_2_1753469567 | Host: 127.0.0.1 | Reason: final_cleanup* | Duration: 56.7s | Messages: 5 | Failures: 0 | Bytes sent: 9536 | Remaining: 0
2025-07-25 15:53:43,840 - api.web_api - INFO - FastAPI server shutting down
2025-07-25 15:53:43,841 - api.web_api - INFO - WebSocket heartbeat task cancelled
2025-07-25 15:53:43,841 - api.web_api - INFO - Scanner status broadcast task cancelled
2025-07-25 15:53:44,912 - config.settings - INFO - Logging configured - Level: INFO, File: logs/trading_bot.log
2025-07-25 15:53:44,912 - config.settings - INFO - Settings loaded - Environment: development, Debug: True
2025-07-25 15:53:45,176 - api.web_api - INFO - BingX client initialized successfully
2025-07-25 15:53:45,196 - api.web_api - INFO - FastAPI server starting - health check will be available immediately
2025-07-25 15:53:45,196 - api.web_api - INFO - FastAPI startup completed - health check ready
2025-07-25 15:53:45,196 - api.web_api - INFO - Database initialization starting with 0.48s delay...
2025-07-25 15:53:45,257 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:53:45,257 - database.connection - INFO - Using SQLite database
2025-07-25 15:53:45,267 - database.connection - INFO - Database connection established successfully
2025-07-25 15:53:45,269 - database.connection - INFO - Database tables created successfully
2025-07-25 15:53:45,681 - api.web_api - INFO - Initializing database with 30s timeout...
2025-07-25 15:53:45,681 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:53:45,681 - database.connection - INFO - Using SQLite database
2025-07-25 15:53:45,683 - database.connection - INFO - Database connection established successfully
2025-07-25 15:53:45,683 - api.web_api - INFO - Creating database tables (skipping drop for faster startup)...
2025-07-25 15:53:45,684 - database.connection - INFO - Database tables created successfully
2025-07-25 15:53:45,684 - api.web_api - INFO - Database initialization completed successfully
2025-07-25 15:53:46,198 - api.web_api - INFO - Background tasks started: real-time data broadcasting, automated risk management, scanner status broadcasting, and WebSocket heartbeat
2025-07-25 15:53:46,198 - api.web_api - INFO - Starting automated risk management task
2025-07-25 15:53:46,198 - api.web_api - INFO - Starting scanner status broadcast task
2025-07-25 15:53:46,198 - api.web_api - INFO - Starting WebSocket heartbeat task
2025-07-25 15:53:46,352 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:53:46,352 - database.connection - INFO - Using SQLite database
2025-07-25 15:53:46,353 - database.connection - INFO - Database connection established successfully
2025-07-25 15:53:49,524 - api.web_api - INFO - WebSocket connection attempt from 127.0.0.1
2025-07-25 15:53:49,524 - api.web_api - INFO - WebSocket connected: conn_1_1753469629 from 127.0.0.1. Total: 1
2025-07-25 15:53:49,525 - api.web_api - INFO - WebSocket connected: conn_1_1753469629 from 127.0.0.1
2025-07-25 15:53:50,564 - api.web_api - INFO - Subscription confirmed for conn_1_1753469629: trading_data
2025-07-25 15:53:50,565 - api.web_api - INFO - Subscription confirmed for conn_1_1753469629: scanner_status
2025-07-25 15:53:50,566 - api.web_api - INFO - Subscription confirmed for conn_1_1753469629: general
2025-07-25 15:53:50,769 - api.web_api - ERROR - Error receiving message from conn_1_1753469629: (1012, None)
2025-07-25 15:53:50,769 - api.web_api - INFO - WebSocket disconnected: conn_1_1753469629 | Host: 127.0.0.1 | Reason: final_cleanup* | Duration: 1.2s | Messages: 4 | Failures: 0 | Bytes sent: 1262 | Remaining: 0
2025-07-25 15:53:50,870 - api.web_api - INFO - FastAPI server shutting down
2025-07-25 15:53:50,870 - api.web_api - INFO - WebSocket heartbeat task cancelled
2025-07-25 15:53:50,871 - api.web_api - INFO - Scanner status broadcast task cancelled
2025-07-25 15:53:52,821 - config.settings - INFO - Logging configured - Level: INFO, File: logs/trading_bot.log
2025-07-25 15:53:52,821 - config.settings - INFO - Settings loaded - Environment: development, Debug: True
2025-07-25 15:53:53,041 - api.web_api - INFO - BingX client initialized successfully
2025-07-25 15:53:53,066 - api.web_api - INFO - FastAPI server starting - health check will be available immediately
2025-07-25 15:53:53,066 - api.web_api - INFO - FastAPI startup completed - health check ready
2025-07-25 15:53:53,066 - api.web_api - INFO - Database initialization starting with 0.41s delay...
2025-07-25 15:53:53,472 - api.web_api - INFO - Initializing database with 30s timeout...
2025-07-25 15:53:53,472 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:53:53,472 - database.connection - INFO - Using SQLite database
2025-07-25 15:53:53,531 - database.connection - INFO - Database connection established successfully
2025-07-25 15:53:53,531 - api.web_api - INFO - Creating database tables (skipping drop for faster startup)...
2025-07-25 15:53:53,533 - database.connection - INFO - Database tables created successfully
2025-07-25 15:53:53,533 - api.web_api - INFO - Database initialization completed successfully
2025-07-25 15:53:53,946 - api.web_api - INFO - Asset validation table requested - page: 1, per_page: 25, sort: symbol asc
2025-07-25 15:53:54,037 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:53:54,037 - database.connection - INFO - Using SQLite database
2025-07-25 15:53:54,038 - database.connection - INFO - Database connection established successfully
2025-07-25 15:53:54,065 - api.web_api - INFO - Fetched 1 assets (total: 1, page: 1/1)
2025-07-25 15:53:54,067 - api.web_api - INFO - Background tasks started: real-time data broadcasting, automated risk management, scanner status broadcasting, and WebSocket heartbeat
2025-07-25 15:53:54,068 - api.web_api - INFO - Starting automated risk management task
2025-07-25 15:53:54,068 - api.web_api - INFO - Starting scanner status broadcast task
2025-07-25 15:53:54,068 - api.web_api - INFO - Starting WebSocket heartbeat task
2025-07-25 15:53:56,820 - api.web_api - INFO - WebSocket connection attempt from 127.0.0.1
2025-07-25 15:53:56,821 - api.web_api - INFO - WebSocket connected: conn_1_1753469636 from 127.0.0.1. Total: 1
2025-07-25 15:53:56,821 - api.web_api - INFO - WebSocket connected: conn_1_1753469636 from 127.0.0.1
2025-07-25 15:53:57,854 - api.web_api - INFO - Subscription confirmed for conn_1_1753469636: trading_data
2025-07-25 15:53:57,856 - api.web_api - INFO - Subscription confirmed for conn_1_1753469636: scanner_status
2025-07-25 15:53:57,856 - api.web_api - INFO - Subscription confirmed for conn_1_1753469636: general
2025-07-25 15:53:57,857 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:53:57,857 - database.connection - INFO - Using SQLite database
2025-07-25 15:53:57,858 - database.connection - INFO - Database connection established successfully
2025-07-25 15:54:00,869 - api.web_api - INFO - 🚀 Starting complete initial asset scan from frontend request...
2025-07-25 15:54:00,870 - scanner.initial_scanner - INFO - Scanner started: Iniciando descoberta e população de ativos... (0 assets)
2025-07-25 15:54:00,870 - scanner.initial_scanner - INFO - Progress: 0/0 (20.0%) - Descobrindo mercados disponíveis...
2025-07-25 15:54:00,870 - api.market_data - INFO - Initializing BingX client...
2025-07-25 15:54:07,319 - api.client - INFO - BingX API connection test successful - found 2250 markets
2025-07-25 15:54:07,322 - api.client - INFO - BingX client initialized successfully (Testnet: True)
2025-07-25 15:54:07,322 - api.market_data - INFO - BingX client initialized successfully
2025-07-25 15:54:14,415 - api.client - INFO - Fetched 1502 USDT markets
2025-07-25 15:54:14,416 - performance.performance - INFO - Operation timing: fetch_markets
2025-07-25 15:54:14,419 - api.market_data - INFO - Fetched 1502 USDT markets
2025-07-25 15:54:14,420 - scanner.initial_scanner - INFO - Discovered 1502 markets from exchange
2025-07-25 15:54:14,420 - scanner.initial_scanner - INFO - Progress: 0/0 (40.0%) - Filtrando e priorizando pares USDT...
2025-07-25 15:54:14,421 - scanner.initial_scanner - INFO - Extracting all active USDT pairs...
2025-07-25 15:54:14,421 - scanner.initial_scanner - INFO - Found 1502 active USDT pairs (0 invalid markets skipped)
2025-07-25 15:54:14,421 - scanner.initial_scanner - INFO - Processing ALL 1502 discovered assets
2025-07-25 15:54:14,422 - api.web_api - INFO - Asset validation table requested - page: 1, per_page: 25, sort: symbol asc
2025-07-25 15:54:14,422 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:54:14,422 - database.connection - INFO - Using SQLite database
2025-07-25 15:54:14,424 - database.connection - INFO - Database connection established successfully
2025-07-25 15:54:14,427 - api.web_api - INFO - Fetched 1 assets (total: 1, page: 1/1)
2025-07-25 15:54:14,432 - scanner.initial_scanner - INFO - Progress: 0/0 (60.0%) - Salvando 1502 ativos no banco de dados...
2025-07-25 15:54:14,433 - scanner.initial_scanner - ERROR - Database transaction failed, rolled back: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:54:14,433 - database.connection - ERROR - Unexpected error in database session: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:54:14,433 - scanner.initial_scanner - ERROR - Database batch operation failed: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:54:14,433 - scanner.initial_scanner - ERROR - Critical error saving basic assets: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:54:14,433 - scanner.initial_scanner - ERROR - Critical error during initial scan: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:54:14,434 - scanner.initial_scanner - ERROR - Scanner error: Erro crítico durante o scan: 'AssetRepository' object has no attribute 'model'
2025-07-25 15:54:14,503 - api.web_api - INFO - ✅ Complete initial scan finished: 0/1502 valid assets
2025-07-25 15:54:14,567 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:54:14,567 - database.connection - INFO - Using SQLite database
2025-07-25 15:54:14,568 - database.connection - INFO - Database connection established successfully
2025-07-25 15:54:15,545 - api.web_api - INFO - Asset validation table requested - page: 1, per_page: 25, sort: symbol asc
2025-07-25 15:54:15,545 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:54:15,545 - database.connection - INFO - Using SQLite database
2025-07-25 15:54:15,547 - database.connection - INFO - Database connection established successfully
2025-07-25 15:54:15,551 - api.web_api - INFO - Fetched 1 assets (total: 1, page: 1/1)
2025-07-25 15:54:18,924 - api.web_api - INFO - Asset validation table requested - page: 1, per_page: 25, sort: symbol asc
2025-07-25 15:54:18,924 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:54:18,925 - database.connection - INFO - Using SQLite database
2025-07-25 15:54:18,925 - database.connection - INFO - Database connection established successfully
2025-07-25 15:54:18,929 - api.web_api - INFO - Fetched 1 assets (total: 1, page: 1/1)
2025-07-25 15:54:21,676 - api.web_api - INFO - Asset validation table requested - page: 1, per_page: 25, sort: symbol asc
2025-07-25 15:54:21,676 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:54:21,676 - database.connection - INFO - Using SQLite database
2025-07-25 15:54:21,677 - database.connection - INFO - Database connection established successfully
2025-07-25 15:54:21,680 - api.web_api - INFO - Fetched 1 assets (total: 1, page: 1/1)
2025-07-25 15:54:21,740 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:54:21,741 - database.connection - INFO - Using SQLite database
2025-07-25 15:54:21,742 - database.connection - INFO - Database connection established successfully
2025-07-25 15:54:33,166 - api.web_api - INFO - Asset validation table requested - page: 1, per_page: 25, sort: symbol asc
2025-07-25 15:54:33,167 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:54:33,167 - database.connection - INFO - Using SQLite database
2025-07-25 15:54:33,168 - database.connection - INFO - Database connection established successfully
2025-07-25 15:54:33,172 - api.web_api - INFO - Fetched 1 assets (total: 1, page: 1/1)
2025-07-25 15:54:37,441 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:54:37,441 - database.connection - INFO - Using SQLite database
2025-07-25 15:54:37,442 - database.connection - INFO - Database connection established successfully
2025-07-25 15:54:42,940 - api.web_api - INFO - Asset validation table requested - page: 1, per_page: 25, sort: symbol asc
2025-07-25 15:54:42,941 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:54:42,941 - database.connection - INFO - Using SQLite database
2025-07-25 15:54:42,942 - database.connection - INFO - Database connection established successfully
2025-07-25 15:54:42,946 - api.web_api - INFO - Fetched 1 assets (total: 1, page: 1/1)
2025-07-25 15:54:44,067 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:54:44,067 - database.connection - INFO - Using SQLite database
2025-07-25 15:54:44,068 - database.connection - INFO - Database connection established successfully
2025-07-25 15:54:52,329 - api.web_api - WARNING - Unknown message type 'pong' from conn_1_1753469636
2025-07-25 15:54:53,989 - api.web_api - INFO - Asset validation table requested - page: 1, per_page: 25, sort: symbol asc
2025-07-25 15:54:53,989 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:54:53,989 - database.connection - INFO - Using SQLite database
2025-07-25 15:54:53,990 - database.connection - INFO - Database connection established successfully
2025-07-25 15:54:53,994 - api.web_api - INFO - Fetched 1 assets (total: 1, page: 1/1)
2025-07-25 15:54:57,075 - api.web_api - ERROR - Error receiving message from conn_1_1753469636: (1012, None)
2025-07-25 15:54:57,075 - api.web_api - INFO - WebSocket disconnected: conn_1_1753469636 | Host: 127.0.0.1 | Reason: final_cleanup* | Duration: 60.3s | Messages: 7 | Failures: 0 | Bytes sent: 8079 | Remaining: 0
2025-07-25 15:54:57,176 - api.web_api - INFO - FastAPI server shutting down
2025-07-25 15:54:57,177 - api.web_api - INFO - WebSocket heartbeat task cancelled
2025-07-25 15:54:57,177 - api.web_api - INFO - Scanner status broadcast task cancelled
2025-07-25 15:56:54,552 - config.settings - INFO - Logging configured - Level: INFO, File: logs/trading_bot.log
2025-07-25 15:56:54,552 - config.settings - INFO - Settings loaded - Environment: development, Debug: True
2025-07-25 15:56:54,779 - api.web_api - INFO - BingX client initialized successfully
2025-07-25 15:56:54,800 - api.web_api - INFO - FastAPI server starting - health check will be available immediately
2025-07-25 15:56:54,800 - api.web_api - INFO - FastAPI startup completed - health check ready
2025-07-25 15:56:54,800 - api.web_api - INFO - Database initialization starting with 0.15s delay...
2025-07-25 15:56:54,952 - api.web_api - INFO - Initializing database with 30s timeout...
2025-07-25 15:56:54,952 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:56:54,952 - database.connection - INFO - Using SQLite database
2025-07-25 15:56:55,006 - database.connection - INFO - Database connection established successfully
2025-07-25 15:56:55,006 - api.web_api - INFO - Creating database tables (skipping drop for faster startup)...
2025-07-25 15:56:55,008 - database.connection - INFO - Database tables created successfully
2025-07-25 15:56:55,008 - api.web_api - INFO - Database initialization completed successfully
2025-07-25 15:56:55,803 - api.web_api - INFO - Background tasks started: real-time data broadcasting, automated risk management, scanner status broadcasting, and WebSocket heartbeat
2025-07-25 15:56:55,804 - api.web_api - INFO - Starting automated risk management task
2025-07-25 15:56:55,804 - api.web_api - INFO - Starting scanner status broadcast task
2025-07-25 15:56:55,804 - api.web_api - INFO - Starting WebSocket heartbeat task
2025-07-25 15:56:56,428 - database.connection - INFO - Using DATABASE_URL from environment
2025-07-25 15:56:56,428 - database.connection - INFO - Using SQLite database
2025-07-25 15:56:56,429 - database.connection - INFO - Database connection established successfully
